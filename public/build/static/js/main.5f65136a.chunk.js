(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{369:function(e,t,a){e.exports=a(641)},510:function(e,t,a){},641:function(e,t,a){"use strict";a.r(t);var n=a(75),r=a(0),o=a.n(r),c=a(45),s=a.n(c),l=a(15),i=a(317),u=a(318),m=a(322),d=a(60),f=a.n(d),p=a(92),g=a(321),b=a(30),E=a(22);function v(){var e=Object(b.a)(["\n  subscription {\n    postAdded {\n      ...PostDetails\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function O(){var e=Object(b.a)(["\n  query {\n    me {\n      ...UserDetails\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function j(){var e=Object(b.a)(["\n  mutation googleLogin($code: String) {\n    googleLogin(code: $code) {\n      value\n    }\n  }\n"]);return j=function(){return e},e}function h(){var e=Object(b.a)(["\n  mutation facebookLogin($code: String) {\n    facebookLogin(code: $code) {\n      value\n    }\n  }\n"]);return h=function(){return e},e}function y(){var e=Object(b.a)(["\n  query MorePosts($cursor: String) {\n    morePosts(cursor: $cursor) {\n      cursor\n      posts {\n        ...PostDetails\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function S(){var e=Object(b.a)(["\n  query  {\n    allPosts {\n      ...PostDetails\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function w(){var e=Object(b.a)(["\n  query {\n    allUsers  {\n      ...UserDetails\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function C(){var e=Object(b.a)(["\n  subscription {\n    messageAdded {\n      ...MessageDetails\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function k(){var e=Object(b.a)(["\n  query {\n    allMessages {\n      ...MessageDetails\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function M(){var e=Object(b.a)(["\n  mutation addMessage($message: String!) {\n    addMessage(message: $message) {\n      ...MessageDetails\n    }\n  }\n  ","\n"]);return M=function(){return e},e}function L(){var e=Object(b.a)(["\n  mutation addPost($content: String!, $file: Upload) {\n    addPost(content: $content, file: $file) {\n      ...PostDetails\n    }\n  }\n  ","\n"]);return L=function(){return e},e}function N(){var e=Object(b.a)(["\n  mutation deletePost($post: String!) {\n    deletePost(post: $post) {\n      id\n      content\n      user {\n        id\n        username\n      }\n    }\n  }\n"]);return N=function(){return e},e}function P(){var e=Object(b.a)(["\n  mutation unlike($post: String!) {\n    unlike(post: $post) {\n      ...LikeDetails\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function U(){var e=Object(b.a)(["\n  query {\n    profilePictures {\n      imageType\n      imageUrl\n      user {\n        username\n      }\n    }\n  }\n"]);return U=function(){return e},e}function D(){var e=Object(b.a)(["\n  query {\n    files\n  }\n"]);return D=function(){return e},e}function $(){var e=Object(b.a)(["\n  mutation singleUpload($file: Upload!) {\n    singleUpload(file: $file) {\n      imageUrl\n      imageType\n    }\n  }\n"]);return $=function(){return e},e}function I(){var e=Object(b.a)(["\n  query allComments($post: String){\n    allComments(post: $post) {\n      ...CommentDetails\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function R(){var e=Object(b.a)(["\n  mutation editUser($firstName: String, $lastName: String, $username: String, $description: String, $currentPassword: String, $newPassword: String) {\n    editUser(firstName: $firstName, lastName: $lastName, username: $username, description: $description, currentPassword: $currentPassword, newPassword: $newPassword) {\n      ...UserDetails\n    }\n  }\n  ","\n"]);return R=function(){return e},e}function x(){var e=Object(b.a)(["\n  mutation addComment($post: String!, $content: String!) {\n    addComment(post: $post, content: $content) {\n      ...CommentDetails\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function T(){var e=Object(b.a)(["\n  mutation addLike($post: String!) {\n    addLike(post: $post) {\n      ...LikeDetails\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function A(){var e=Object(b.a)(["\n  mutation createUser($name: String!, $username: String!, $password: String!, $description: String!, $country: String!, $city: String!, $born: String!) {\n    createUser(name: $name, username: $username, password: $password, description: $description, country: $country, city: $city, born: $born) {\n      username\n      name\n    }\n  }\n"]);return A=function(){return e},e}function B(){var e=Object(b.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password)  {\n      value\n    }\n  }\n"]);return B=function(){return e},e}function q(){var e=Object(b.a)(["\n  fragment MessageDetails on Message {\n    message\n    id\n    date\n    user {\n      name\n      id\n      username\n      profilePicture {\n        imageUrl\n      }\n    }\n  }\n"]);return q=function(){return e},e}function H(){var e=Object(b.a)(["\n  fragment PostDetails on Post {\n    content\n    date\n    time\n    id\n    image {\n      imageUrl\n    }\n    video {\n      videoUrl\n    }\n    user {\n      id\n      username\n      name\n      profilePicture {\n        imageUrl\n      }\n    }\n    comments {\n      content\n      date\n      user {\n        username\n        profilePicture {\n          imageUrl\n        }\n      }\n    }\n    likes {\n      date\n      time\n      id\n      user {\n        id\n        username\n        profilePicture {\n          imageUrl\n        }\n      }\n    }\n  }\n"]);return H=function(){return e},e}function _(){var e=Object(b.a)(["\n  fragment LikeDetails on Like {\n    id\n    date\n    user {\n      id\n      username\n      profilePicture {\n        imageUrl\n      }\n    }\n    post {\n      id\n      content\n    }\n  }\n"]);return _=function(){return e},e}function z(){var e=Object(b.a)(["\n  fragment CommentDetails on Comment {\n    content\n    date\n    id\n    post {\n      id\n    }\n    user {\n      id\n      username\n      profilePicture {\n        imageUrl\n      }\n    }\n  }\n"]);return z=function(){return e},e}function G(){var e=Object(b.a)(["\n  fragment UserDetails on User {\n    name\n    username\n    id\n    description\n    born\n    country\n    city\n    profilePicture {\n      imageUrl\n    }\n    posts {\n      content\n    }\n  }\n"]);return G=function(){return e},e}var Q=Object(E.a)(G()),F=Object(E.a)(z()),V=Object(E.a)(_()),W=Object(E.a)(H()),Z=Object(E.a)(q()),K=Object(E.a)(B()),J=Object(E.a)(A()),Y=Object(E.a)(T(),V),X=Object(E.a)(x(),F),ee=Object(E.a)(R(),Q),te=Object(E.a)(I(),F),ae=Object(E.a)($()),ne=(Object(E.a)(D()),Object(E.a)(U()),Object(E.a)(P(),V)),re=Object(E.a)(N()),oe=Object(E.a)(L(),W),ce=Object(E.a)(M(),Z),se=Object(E.a)(k(),Z),le=Object(E.a)(C(),Z),ie=Object(E.a)(w(),Q),ue=Object(E.a)(S(),W),me=(Object(E.a)(y(),W),Object(E.a)(h())),de=Object(E.a)(j()),fe=Object(E.a)(O(),Q),pe=Object(E.a)(v(),W),ge=a(661),be=a(647),Ee=a(108),ve=a(35),Oe=a(46),je=a(193),he=a(223),ye=a.n(he),Se=je.stringify({client_id:0xedf6fb92cb49,redirect_uri:"http://localhost:3000/",scope:["email","user_friends","user_birthday","user_hometown","user_location"].join(","),response_type:"code",auth_type:"rerequest",display:"popup"}),we=je.stringify({client_id:"769250645795-gqedodb607rontuq1bbjmsiic0a9jai1.apps.googleusercontent.com",redirect_uri:"http://localhost:3000/",scope:"profile email https://www.googleapis.com/auth/user.addresses.read https://www.googleapis.com/auth/user.birthday.read",response_type:"code",access_type:"offline",prompt:"consent"}),Ce="https://www.facebook.com/v4.0/dialog/oauth?".concat(Se),ke="https://accounts.google.com/o/oauth2/v2/auth?".concat(we),Me=je.parse(window.location.search),Le=function(e){var t=e.setToken,a=e.refetchUser,n=e.setError,c=Object(r.useState)(""),s=Object(l.a)(c,2),i=s[0],u=s[1],m=Object(r.useState)(""),d=Object(l.a)(m,2),b=d[0],E=d[1],v=Object(ve.g)(),O=Object(g.a)(K,{onError:function(e){n(e.graphQLErrors[0].message)}}),j=Object(l.a)(O,2),h=j[0],y=j[1],S=Object(g.a)(me,{onError:function(e){console.log(e.graphQLErrors[0].message)}}),w=Object(l.a)(S,2),C=w[0],k=w[1],M=Object(g.a)(de,{onError:function(e){console.log(e.graphQLErrors[0].message)}}),L=Object(l.a)(M,2);L[0],L[1];Object(r.useEffect)((function(){if(k.data){var e=k.data.facebookLogin.value;t(e),localStorage.setItem("user-token",e),a(),v.push("/")}}),k.data),Object(r.useEffect)((function(){Me.code&&C({variables:{code:Me.code}})}),[]),Object(r.useEffect)((function(){if(y.data){var e=y.data.login.value;t(e),localStorage.setItem("user-token",e),a(),v.push("/")}}),[y.data]);var N=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(i,b),h({variables:{username:i,password:b}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement(ge.a,{onSubmit:N},o.a.createElement(ge.a.Group,{controlId:"formBasicUsername"},o.a.createElement(ge.a.Label,null,"Username"),o.a.createElement(ge.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){var t=e.target;return u(t.value)}})),o.a.createElement(ge.a.Group,{controlId:"formBasicPassword"},o.a.createElement(ge.a.Label,null,"Password"),o.a.createElement(ge.a.Control,{type:"password",placeholder:"Password",onChange:function(e){var t=e.target;return E(t.value)}})),o.a.createElement(ge.a.Group,{controlId:"formBasicCheckbox"},o.a.createElement(Oe.b,{to:"/signup"},"Sign Up")),o.a.createElement(be.a,{variant:"primary",type:"submit",primary:!0},"Login"),o.a.createElement("p",{className:"or"},o.a.createElement("span",null,"OR")),o.a.createElement(be.a,{href:Ce,color:"facebook",className:"fbLoginButton"},o.a.createElement(Ee.a,{name:"facebook"})," Continue with Facebook"),o.a.createElement(be.a,{href:ke,color:"google",className:"fbLoginButton"},o.a.createElement(Ee.a,{name:"google"})," Sign in with Google")))},Ne=(a(510),a(659)),Pe=a(656),Ue=a(34),De=a(325),$e=a(667),Ie=a(340),Re=a.n(Ie),xe=(a(511),function(e){var t=e.setError,a=e.setToken,n=e.refetchUser,c=Object(r.useState)([]),s=Object(l.a)(c,2),i=s[0],u=(s[1],Object(ve.g)()),m=Object(g.a)(J,{refetchQueries:[{query:ie}],onError:function(e){t(e.graphQLErrors[0].message)}}),d=Object(l.a)(m,2),f=d[0],p=d[1],b=Object(g.a)(K,{onError:function(e){t(e.graphQLErrors[0].message)}}),E=Object(l.a)(b,2),v=E[0],O=E[1],j=Object(r.useState)(""),h=Object(l.a)(j,2),y=h[0],S=h[1],w=Object(r.useState)(""),C=Object(l.a)(w,2),k=C[0],M=C[1],L=Object(r.useState)(""),N=Object(l.a)(L,2),P=N[0],U=N[1],D=Object(r.useState)(""),$=Object(l.a)(D,2),I=$[0],R=$[1],x=Object(r.useState)(""),T=Object(l.a)(x,2),A=T[0],B=T[1],q=Object(r.useState)(""),H=Object(l.a)(q,2),_=H[0],z=H[1],G=Object(r.useState)(""),Q=Object(l.a)(G,2),F=Q[0],V=Q[1],W=Object(r.useState)(new Date),Z=Object(l.a)(W,2),Y=Z[0],X=Z[1];Object(r.useEffect)((function(){ye.a.get("https://restcountries.eu/rest/v2/all").then((function(e){e.data.forEach((function(e){i.push({text:e.name,flag:e.alpha2Code.toLowerCase(),key:e.alpha2Code.toLowerCase(),value:e.name})}))}))}),[]),Object(r.useEffect)((function(){p.data&&v({variables:{username:P,password:I}})}),[p.data]),Object(r.useEffect)((function(){if(O.data){var e=O.data.login.value;a(e),localStorage.setItem("user-token",e),n(),u.push("/")}}),[O.data]);return o.a.createElement(ge.a,{onSubmit:function(e){e.preventDefault();var t=y+" "+k,a=Y.toString();console.log(typeof a),f({variables:{name:t,username:P,password:I,description:A,city:_,country:F,born:a}})}},o.a.createElement(ge.a.Row,null,o.a.createElement(ge.a.Group,{as:De.a,controlId:"formBasicFirstName"},o.a.createElement(ge.a.Label,null,"First Name"),o.a.createElement(ge.a.Control,{required:!0,type:"text",placeholder:"First name",onChange:function(e){var t=e.target;return S(t.value)}})),o.a.createElement(ge.a.Group,{as:De.a,controlId:"formBasicLastName"},o.a.createElement(ge.a.Label,null,"Last Name"),o.a.createElement(ge.a.Control,{required:!0,type:"text",placeholder:"Last name",onChange:function(e){var t=e.target;return M(t.value)}}))),o.a.createElement(ge.a.Group,{controlId:"formBasicUsername"},o.a.createElement(ge.a.Label,null,"Username"),o.a.createElement(ge.a.Control,{required:!0,type:"text",placeholder:"Enter username",onChange:function(e){var t=e.target;return U(t.value)}})),o.a.createElement(ge.a.Group,{controlId:"exampleForm.ControlTextarea1"},o.a.createElement(ge.a.Label,null,"Description"),o.a.createElement(ge.a.Control,{required:!0,as:"textarea",rows:"2",placeholder:"Description...",onChange:function(e){var t=e.target;return B(t.value)}})),o.a.createElement(ge.a.Row,null,o.a.createElement(ge.a.Group,{as:De.a,controlId:"formGridCity"},o.a.createElement(ge.a.Label,null,"City"),o.a.createElement(ge.a.Control,{required:!0,placeholder:"City",onChange:function(e){var t=e.target;return z(t.value)}})),o.a.createElement(ge.a.Group,{autoComplete:"off",as:De.a,controlId:"formGridState"},o.a.createElement(ge.a.Label,null,"Country"),o.a.createElement($e.a,{placeholder:"Select Country",onChange:function(e,t){var a=t.value;return V(a)},fluid:!0,search:!0,selection:!0,options:i}))),o.a.createElement(ge.a.Group,{controlId:"exampleForm.ControlTextarea1"},o.a.createElement(ge.a.Label,null,"Date of birth"),o.a.createElement(Re.a,{required:!0,selected:Y,onChange:function(e){X(e)},dateFormat:"dd/MM/yyyy"})),o.a.createElement(ge.a.Group,{controlId:"formBasicPassword"},o.a.createElement(ge.a.Label,null,"Password"),o.a.createElement(ge.a.Control,{required:!0,type:"password",placeholder:"Password",onChange:function(e){var t=e.target;return R(t.value)}})),o.a.createElement(ge.a.Group,{controlId:"formBasicCheckbox"},o.a.createElement(Oe.b,{to:"/login"},"Login")),o.a.createElement(Pe.a,{variant:"primary",type:"submit"},"Sign Up"))}),Te=a(307),Ae=a(660),Be=a(355),qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_POSTS":var a=t.data.data.allPosts,r=a.slice(0);return r.sort((function(e,t){return-(new Date(e.date).getTime()-new Date(t.date).getTime())})),r;case"ADD_LIKE":var o=t.like.post.id,c=e.find((function(e){return e.id===o})),s=Object(n.a)(Object(n.a)({},c),{},{likes:c.likes.concat(t.like)});return console.log("New post",s),e.map((function(e){return e.id!==s.id?e:s}));case"REMOVE_LIKE":var l=t.like.post.id,i=e.find((function(e){return e.id===l})),u=Object(n.a)(Object(n.a)({},i),{},{likes:i.likes.filter((function(e){return e.id!==t.like.id}))});return e.map((function(e){return e.id!==u.id?e:u}));case"REMOVE_POST":var m=e.find((function(e){return e.id===t.post.id})),d=e.filter((function(e){return e.id!==m.id}));return console.log("POSTS",d),d;case"ADD_COMMENT":console.log("NEw comment",t.comment);var f=e.find((function(e){return e.id===t.comment.post.id})),p=Object(n.a)(Object(n.a)({},f),{},{comments:f.comments.concat(t.comment)});return e.map((function(e){return e.id!==t.comment.post.id?e:p}));case"ADD_POST":return[].concat(Object(Be.a)(e),[t.data])}return e},He=a(665),_e=a(662),ze=function(e){var t=new Date(e.date),a=new Date,n=new Date(a-t),r=Math.floor(n/864e5),o=n.getMonth(),c=n.getFullYear()-1970,s=Math.floor(n/60/60/1e3),l=n.getMinutes(),i=n.getSeconds();return i<30&&l<1?"Just now":i<60&&l<1?1===i?"1 second ago":"".concat(i," seconds ago"):l<60&&s<1?1===l?"1 minute ago":"".concat(l," minutes ago"):s<24&&r<1?1===s?"1 hour ago":"".concat(s," hours ago"):r<30&&o<1?1===r?"1 day ago":"".concat(r," days ago"):o<12&&c<1?1===o?"1 month ago":"".concat(o," months ago"):1===c?"1 year ago":"".concat(c," years ago")},Ge=o.a.forwardRef((function(e,t){var a=e.showCommentsModal,n=e.setShowCommentsModal,c=e.post,s=e.setMessageHeader,i=e.emptyMessageHeader,u=(Object(Ue.b)(),Object(r.useState)("")),m=Object(l.a)(u,2),d=m[0],f=m[1],p=Object(r.useState)([]),b=Object(l.a)(p,2),E=b[0],v=b[1],O=Object(r.useState)(!1),j=Object(l.a)(O,2),h=j[0],y=j[1],S=Object(r.useState)("Add Comment"),w=Object(l.a)(S,2),C=w[0],k=w[1],M=o.a.createRef(),L=Object(Te.a)(te,{notifyOnNetworkStatusChange:!0}),N=Object(l.a)(L,2),P=N[0],U=N[1],D=U.data,$=U.refetch,I=U.loading,R=U.networkStatus,x=Object(g.a)(X,{onError:function(e){s(e.graphQLErrors[0].message),i(),y(!1),k("Add Comment")}}),T=Object(l.a)(x,2),A=T[0],B=T[1];Object(r.useEffect)((function(){D&&(v(D.allComments),I&&4===R||q())}),[D]),Object(r.useEffect)((function(){if(B.data){console.log("COMMENT DATA",B.data),y(!1);B.data.addComment;$(),k("Add Comment")}}),[B.data]);var q=function(){M.current.scrollIntoView({behavior:"smooth"})};Object(r.useImperativeHandle)(t,(function(){return{setComments:v,getComments:P,scrollToBottom:q}}));return a&&c?o.a.createElement(Ae.a,{show:a,onHide:function(){n(!1)},"aria-labelledby":"example-modal-sizes-title-lg"},o.a.createElement(Ae.a.Header,{closeButton:!0},o.a.createElement(Ae.a.Title,{id:"example-modal-sizes-title-lg"},"Comments")),o.a.createElement(Ae.a.Body,null,o.a.createElement(He.a.Group,{className:"commentsContainer"},I?o.a.createElement("h3",null,"Loading comments..."):4===R?o.a.createElement("h3",null,"Refetching comments..."):o.a.createElement("div",{className:"comment-group",id:"comment-group"},0===E.length?o.a.createElement("h3",{className:"noCommentsLabel"},"No comments yet."):null,E.map((function(e){return o.a.createElement(He.a,null,e.user.profilePicture?o.a.createElement(He.a.Avatar,{src:e.user.profilePicture.imageUrl}):o.a.createElement(He.a.Avatar,{as:"Icon",name:"user",size:"large"}),o.a.createElement(He.a.Content,null,o.a.createElement(He.a.Author,{as:"a",href:"/users/".concat(e.user.id)},e.user.username),o.a.createElement(He.a.Metadata,null,o.a.createElement("div",null,ze(e))),o.a.createElement(He.a.Text,{className:"comment-text"},e.content)))})),o.a.createElement("div",{ref:M}))),o.a.createElement(_e.a,{onSubmit:function(e){e.preventDefault(),f(""),e.target[0].value="",y(!0),k("Commenting..."),A({variables:{post:c.id,content:d}})}},o.a.createElement(_e.a.TextArea,{onChange:function(e){f(e.target.value),console.log(d),console.log()},placeholder:"Write a comment..."}),o.a.createElement(be.a,{content:C,labelPosition:"left",icon:"edit",primary:!0,disabled:h})))):null})),Qe=a(664),Fe=function(e){var t=e.showLikesModal,a=e.setShowLikesModal,n=e.post;Object(Ue.b)();return t&&n?o.a.createElement(Ae.a,{show:t,onHide:function(){return a(!1)},"aria-labelledby":"example-modal-sizes-title-lg"},o.a.createElement(Ae.a.Header,{closeButton:!0},o.a.createElement(Ae.a.Title,{id:"example-modal-sizes-title-lg"},"Likes")),o.a.createElement(Ae.a.Body,null,o.a.createElement(Qe.a,{className:"likes-group"},n.likes.map((function(e){return o.a.createElement(Qe.a.Event,null,e.user.profilePicture?o.a.createElement(Qe.a.Label,{image:e.user.profilePicture.imageUrl}):o.a.createElement(Ee.a,{name:"user",size:"large"}),o.a.createElement(Qe.a.Content,null,o.a.createElement(Qe.a.Summary,null,e.user.username)))}))))):null},Ve=a(670),We=a(658),Ze=a(346),Ke=o.a.forwardRef((function(e,t){var a=e.p,n=e.isVideoPlaying,c=e.setIsVideoPlaying,s=e.setSelectedPost,i=e.setShowLikesModal,u=e.setShowCommentsModal,m=e.setMessageHeader,d=e.emptyMessageHeader,f=e.commentsRef,p=e.user,b=Object(Ue.b)(),E=Object(r.useState)(!1),v=Object(l.a)(E,2),O=v[0],j=v[1],h=Object(g.a)(Y,{refetchQueries:[{query:ue}],onError:function(e){m(e.graphQLErrors[0].message),d()}}),y=Object(l.a)(h,2),S=y[0],w=y[1],C=Object(g.a)(ne,{refetchQueries:[{query:ue}],onError:function(e){m(e.graphQLErrors[0].message),d()}}),k=Object(l.a)(C,2),M=k[0],L=k[1],N=Object(g.a)(re,{refetchQueries:[{query:ue}],onError:function(e){m(e.graphQLErrors[0].message),d()}}),P=Object(l.a)(N,2),U=P[0],D=P[1],$=Object(r.useRef)(null),I=Object(r.useRef)(null),R=Object(r.useRef)(null),x=Object(r.useRef)(null);Object(r.useEffect)((function(){D.data&&(m("Your post has been deleted"),b({type:"REMOVE_POST",post:D.data.deletePost}),d(),R.current&&(R.current.disabled=!1,R.current.textContent="Delete"))}),[D.data]),Object(r.useEffect)((function(){w.data&&(b(function(e){return{type:"ADD_LIKE",like:e}}(w.data.addLike)),$.current&&($.current.disabled=!1))}),[w.data]),Object(r.useEffect)((function(){L.data&&(b(function(e){return{type:"REMOVE_LIKE",like:e}}(L.data.unlike)),I.current&&(I.current.disabled=!1))}),[L.data]),Object(r.useEffect)((function(){x.current&&O&&!n&&(x.current.play(),c(!0))}),[n]);if(!p)return null;console.log(n);var T,A=function(e){return console.log("Post likes, ",e.likes),0===e.likes.filter((function(e){return e.user.username===p.username})).length?o.a.createElement(Pe.a,{ref:$,variant:"primary",onClick:function(t){var a=t.target;!function(e,t){S({variables:{post:t.id}})}(0,e),a.disabled=!0}},"Like"):o.a.createElement(Pe.a,{ref:I,variant:"primary",onClick:function(t){var a=t.target;!function(e,t){M({variables:{post:t.id}})}(0,e),a.disabled=!0}},"Unlike")},B=function(e,t){var a=e;return"https://"!==e.substr(0,8)&&"http://"!==e.substr(0,7)&&(a="https://"+e),t?"<a href=".concat(a,' target="_blank">').concat(e,"</a>"):o.a.createElement("a",{href:a,rel:"noopener noreferrer",target:"_blank"},e," ")};return o.a.createElement("div",{className:"card-content"},o.a.createElement(Ve.a,{className:"post-card"},o.a.createElement(Ve.a.Header,{className:"card-header"},o.a.createElement(We.a,null,o.a.createElement(De.a,null,ze(a)),o.a.createElement(De.a,{xs:5}),o.a.createElement(De.a,null))),o.a.createElement(Ve.a.Body,null,o.a.createElement(Ve.a.Title,null,a.user.profilePicture?o.a.createElement("img",{className:"profile-picture",src:a.user.profilePicture.imageUrl}):o.a.createElement(Ee.a,{name:"user",size:"small"})," ",o.a.createElement(Oe.b,{className:"userLink",to:"/users/".concat(a.user.id)},a.user.username)),o.a.createElement(Ve.a.Text,{className:"postContent"},function(e){var t=new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?([^ ])+");if(e.length>200){var a=e.substr(0,200).split(" ");return a.pop(),console.log(a.length),o.a.createElement("div",null,a.map((function(e,n){return e.match(t)?B(e,!1):n===a.length-1?e+"":e+" "})),"... ",o.a.createElement("button",{className:"seeMoreButton",onClick:function(a){a.target.parentNode.innerHTML="<div> ".concat(e.split(" ").map((function(e,a){return e.match(t)?B(e,!0):e+" "})).join(" "),"</div>")}},"See more"))}return o.a.createElement("div",null,e.split(" ").map((function(e,a){return e.match(t)?B(e,!1):e+" "})))}(a.content))),o.a.createElement("div",{className:"cardImageContainer"},a.image?o.a.createElement("a",{href:a.image.imageUrl}," ",o.a.createElement(Ve.a.Img,{className:"card-image",variant:"top",src:a.image.imageUrl})):null,a.video?o.a.createElement(Ze.a,{onEnter:function(){j(!0),n||(x.current.play(),c(!0))},onLeave:function(){j(!1),x.current.pause(),c(!1)}},o.a.createElement("video",{ref:x,className:"post-video",controls:!0,loop:!0},o.a.createElement("source",{src:a.video.videoUrl,type:"video/mp4"}),o.a.createElement("source",{src:a.video.videoUrl,type:"video/ogg"}),o.a.createElement("source",{src:a.video.videoUrl,type:"video/webm"}),o.a.createElement("source",{src:a.video.videoUrl,type:"video/mov"}))):null),o.a.createElement(Ve.a.Body,{className:"cardActions"},o.a.createElement(Pe.a,{variant:"link",onClick:function(){s(a),f.current.getComments({variables:{post:a.id}}),u(!0)}},a.comments.length," comments"),o.a.createElement(Pe.a,{variant:"link",onClick:function(){s(a),i(!0)}},a.likes.length," likes"),(T=a).user.username!==p.username?o.a.createElement("div",{className:"post-action-button"},A(T),o.a.createElement(Pe.a,{className:"margin-left-10",variant:"primary",onClick:function(){s(T),f.current.getComments({variables:{post:T.id}}),u(!0)}},"Comment")):o.a.createElement(Pe.a,{ref:R,onClick:function(){return function(e){window.confirm("Are you sure you want to delete this post?")&&(U({variables:{post:e.id}}),R.current&&(R.current.disabled=!0,R.current.textContent="Deleting..."),m("Deleting post..."))}(T)},className:"ui negative button"},"Delete"))))})),Je=function(e){e.logout,e.setMessageContent;var t=e.setMessageHeader,a=e.emptyMessageHeader,n=(Object(Ue.b)(),Object(Ue.c)((function(e){return e.posts}))),c=Object(Ue.c)((function(e){return e.user})),s=Object(r.useState)(null),i=Object(l.a)(s,2),u=i[0],m=i[1],d=Object(r.useState)(!1),f=Object(l.a)(d,2),p=f[0],g=f[1];console.log("USER IN STATE",c);var b=Object(r.useState)(!1),E=Object(l.a)(b,2),v=E[0],O=E[1],j=Object(r.useState)(!1),h=Object(l.a)(j,2),y=h[0],S=h[1],w=o.a.createRef();return console.log("Post2",u),console.log("SHow likes modal",v),o.a.createElement("div",null,o.a.createElement(Fe,{showLikesModal:v,setShowLikesModal:O,post:u}),o.a.createElement(Ge,{setMessageHeader:t,emptyMessageHeader:a,showCommentsModal:y,setShowCommentsModal:S,post:u,ref:w}),o.a.createElement("div",{className:"cards"},n.map((function(e){return o.a.createElement(Ke,{p:e,isVideoPlaying:p,setIsVideoPlaying:g,setSelectedPost:m,setShowLikesModal:O,setShowCommentsModal:S,setMessageHeader:t,emptyMessageHeader:a,commentsRef:w,user:c})}))))},Ye=function(e){var t=e.setImage,a=e.image;return o.a.createElement("div",null,o.a.createElement("input",{type:"file",value:a?"C:\\fakepath\\".concat(a.name):"",onChange:function(e){var a=e.target,n=a.validity,r=Object(l.a)(a.files,1)[0];return n.valid&&t(r)}}))},Xe=a(187),et=function(e){var t=e.showModal,a=e.setShowModal,n=(e.setMessageContent,e.setMessageHeader),c=e.emptyMessageHeader,s=Object(r.useState)(""),i=Object(l.a)(s,2),u=i[0],m=i[1],d=Object(r.useState)(""),b=Object(l.a)(d,2),E=b[0],v=b[1],O=Object(g.a)(oe,{onError:function(e){n(e.graphQLErrors[0].message),c()}}),j=Object(l.a)(O,2),h=j[0],y=j[1];Object(r.useEffect)((function(){y.data&&(console.log("POSt added",y.data.addPost),n("Post added successfully!"),c())}),[y.data]);var S=Object(Ue.c)((function(e){return e.user})),w=function(){var e=Object(p.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("originalFile instanceof Blob",t instanceof Blob),console.log("originalFile size ".concat(t.size/1024/1024," MB")),a={maxSizeMB:1,useWebWorker:!0},e.prev=3,e.next=6,Object(Xe.a)(t,a);case 6:n=e.sent,console.log("compressedFile instanceof Blob",n instanceof Blob),console.log("compressedFile size ".concat(n.size/1024/1024," MB")),h({variables:{content:u,file:n}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("ERROR compressing file",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();if(t&&S){var C=S.name.split(" ")[0],k="What is on your mind, ".concat(C,"?");return o.a.createElement(Ae.a,{size:"lg",show:t,onHide:function(){return a(!1)},"aria-labelledby":"example-modal-sizes-title-lg"},o.a.createElement(Ae.a.Header,{closeButton:!0},o.a.createElement(Ae.a.Title,{id:"example-modal-sizes-title-lg"},"Add Post")),o.a.createElement(Ae.a.Body,null,o.a.createElement(ge.a,{onSubmit:function(e){var t;e.preventDefault(),E?!1===((t=E)&&("image"===t.type.split("/")[0]||"video"===t.type.split("/")[0]))?(n("Please include image or video"),c()):(a(!1),"image"===E.type.split("/")[0]?w(E):h({variables:{content:u,file:E}}),n("Adding post..."),v("")):(h({variables:{content:u,file:null}}),a(!1),n("Adding post..."))}},o.a.createElement(ge.a.Group,{controlId:"formBasicEmail"},o.a.createElement(ge.a.Label,null,"Content"),o.a.createElement(ge.a.Control,{required:!0,as:"textarea",rows:"2",placeholder:k,onChange:function(e){var t=e.target.value;m(t),t.substr(0,t.length).match(/(?:^|\r?\n\s*)$/)&&t.substr(t.length).match(/^(?:\s*\r?\n|$)/)&&console.log("empty")}})),o.a.createElement(ge.a.Group,{controlId:"formImage"},o.a.createElement(ge.a.Label,null,"Image"),o.a.createElement(Ye,{setImage:v,image:E}),E?o.a.createElement("div",{className:"addpost-image-container"},"image"===E.type.split("/")[0]?o.a.createElement("img",{className:"addpost-image",src:URL.createObjectURL(E)}):null,"video"===E.type.split("/")[0]?o.a.createElement("video",{controls:!0,className:"addpost-image"},o.a.createElement("source",{src:URL.createObjectURL(E),type:"video/mp4"}),o.a.createElement("source",{src:URL.createObjectURL(E),type:"video/ogg"}),o.a.createElement("source",{src:URL.createObjectURL(E),type:"video/webm"})):null,o.a.createElement(be.a,{icon:"close",onClick:function(){return v("")}})):null),o.a.createElement(be.a,{primary:!0,type:"submit",disabled:""===u},"Submit"))))}return null},tt=a(657),at=a(668),nt=a(353),rt=function(e){e.logout;var t=Object(Ue.c)((function(e){return e.users})),a=Object(r.useState)(t.filter((function(e){return""!==e.id}))),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)([]),u=Object(l.a)(i,2),m=u[0],d=u[1];console.log("USers ",c),c.filter((function(e){return"Saska Rauhala"===e.name}));return console.log("Users",t),Object(r.useEffect)((function(){0===m.length||1===m.length&&""===m[0]?s(t.filter((function(e){return""!==e.id}))):s(t.filter((function(e){return m.some((function(t){return""!==t?-1!==e.name.toLowerCase().indexOf(t):null}))})).filter((function(e){return m.some((function(t){return""!==t?-1!==e.name.toLowerCase().indexOf(t):null}))})))}),[m]),o.a.createElement("div",{className:"users-container"},o.a.createElement("div",{className:"search-container"},o.a.createElement(tt.a,{icon:"search",placeholder:"Search users...",id:"search-input",onChange:function(e){d(e.target.value.toLowerCase().split(" "))}})),o.a.createElement(We.a,{className:"users-row"},c.map((function(e,t){return o.a.createElement(De.a,{sm:12,md:6,lg:4,className:"user-card"},o.a.createElement(at.a,{className:"users-card-content"},e.profilePicture?o.a.createElement(nt.a,{src:e.profilePicture.imageUrl,wrapped:!0,ui:!1}):null,o.a.createElement(at.a.Content,null,o.a.createElement(at.a.Header,null,o.a.createElement(Oe.b,{className:"userLink",to:"/users/".concat(e.id)},e.name)),o.a.createElement(at.a.Meta,null,o.a.createElement("span",{className:"date"},"@",e.username)),o.a.createElement(at.a.Description,{className:"card-description"},e.description)),o.a.createElement(at.a.Content,{extra:!0},e.posts.length," ",1===e.posts.length?"post":"posts")))}))))},ot=(a(587),function(e){var t=e.user,a=Object(i.a)(se),n=Object(r.useState)(""),c=Object(l.a)(n,2),s=c[0],u=c[1],m=Object(g.a)(ce,{onError:function(e){console.log(e.graphQLErrors[0].message)}}),d=Object(l.a)(m,2),f=d[0],p=d[1],b=o.a.createRef();console.log("username",t);var E=function(){b.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};Object(r.useEffect)((function(){p.data&&u("")}),[p.data]),Object(r.useEffect)((function(){a.data&&null!==b.current&&(E(),console.log("GROUP",b.current))}),[a.data]),Object(r.useEffect)((function(){b.current&&(E(),console.log("Message ge",b.current))}));return a.loading?o.a.createElement("h1",null,"Loading messages..."):t&&null!==b?o.a.createElement("div",null,o.a.createElement(He.a.Group,null,o.a.createElement("div",{className:"messageContainer"},a.data.allMessages.map((function(e,a){return o.a.createElement(He.a,{className:t.username===e.user.username?"rightMessage justifyEnd":"leftMessage justifyStart"},o.a.createElement("div",{className:t.username===e.user.username?"messageBox messageBoxBlue colorWhite":"messageBox"},o.a.createElement(He.a.Avatar,{src:e.user.profilePicture?e.user.profilePicture.imageUrl:null}),o.a.createElement(He.a.Content,{className:"pl-5"},o.a.createElement(He.a.Author,{as:"a"},e.user.name),o.a.createElement(He.a.Metadata,null,o.a.createElement("div",null,ze(e))),o.a.createElement(He.a.Text,null,e.message))))})),o.a.createElement("div",{ref:b})),o.a.createElement(_e.a,{reply:!0,onSubmit:function(e){e.preventDefault(),f({variables:{message:s}})}},o.a.createElement(_e.a.TextArea,{className:"messageTextarea",onChange:function(e){var t=e.target;return u(t.value)},placeholder:"Add message...",value:s}),o.a.createElement(be.a,{disabled:!s,content:"Add Message",labelPosition:"left",icon:"edit",primary:!0})))):null}),ct=a(666),st=function(e){var t=e.setMessageHeader,a=e.emptyMessageHeader,n=Object(g.a)(ae,{refetchQueries:[{query:fe}],onError:function(e){t(e.graphQLErrors[0].message),a()}}),c=Object(l.a)(n,2),s=c[0],i=c[1],u=Object(g.a)(ee,{refetchQueries:[{query:fe}],onError:function(e){t(e.graphQLErrors[0].message),a()}}),m=Object(l.a)(u,2),d=m[0],b=m[1],E=Object(r.useState)(""),v=Object(l.a)(E,2),O=v[0],j=v[1],h=Object(r.useState)(""),y=Object(l.a)(h,2),S=y[0],w=y[1],C=Object(r.useState)(""),k=Object(l.a)(C,2),M=k[0],L=k[1],N=Object(r.useState)(""),P=Object(l.a)(N,2),U=P[0],D=P[1],$=Object(ve.h)().id,I=Object(Ue.c)((function(e){return e.users})),R=Object(Ue.c)((function(e){return e.user})),x=I.find((function(e){return e.id===$})),T=Object(r.useState)(""),A=Object(l.a)(T,2),B=A[0],q=A[1];Object(r.useEffect)((function(){i.data&&(t("Profile picture changed"),a())}),[i.data]),Object(r.useEffect)((function(){b.data&&(t("User changes saved"),a())}),[b.data]),Object(r.useEffect)((function(){j(R.name.split(" ")[0]),w(R.name.split(" ")[1]),L(R.username),D(R.description)}),[R]);var H=function(){var e=Object(p.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("originalFile instanceof Blob",t instanceof Blob),console.log("originalFile size ".concat(t.size/1024/1024," MB")),a={maxSizeMB:1,useWebWorker:!0},e.prev=3,e.next=6,Object(Xe.a)(t,a);case 6:n=e.sent,console.log("compressedFile instanceof Blob",n instanceof Blob),console.log("compressedFile size ".concat(n.size/1024/1024," MB")),s({variables:{file:n}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("ERROR compressing file",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return x?o.a.createElement("div",null,o.a.createElement(ct.a.Group,null,o.a.createElement(ct.a,null,o.a.createElement("div",{className:"profilePictureContainer"},x.profilePicture?o.a.createElement("img",{src:B?URL.createObjectURL(B):x.profilePicture.imageUrl}):o.a.createElement(Ee.a,{name:"user",size:"small"}),x.id===R.id?o.a.createElement(be.a,{icon:"photo",onClick:function(e){e.target;var t=document.getElementById("profilePictureInput");console.log(t),t.click()}}):null,o.a.createElement("input",{id:"profilePictureInput",type:"file",accept:"image/*",onChange:function(e){var a=e.target,n=a.validity,r=Object(l.a)(a.files,1)[0];n.valid&&H(r)&&q(r)&&t("Changing profile picture...")}})),o.a.createElement(ct.a.Content,{className:"profileContent"},o.a.createElement(ct.a.Header,null,x.name," | @",x.username),o.a.createElement(ct.a.Meta,{className:"profileMeta"},o.a.createElement("p",{className:"stay"},ze({date:x.born}).split(" ").map((function(e,t){return t<2?e+" ":null}))," old"),o.a.createElement("p",null,"Lives in ",x.city,", ",x.country)),o.a.createElement(ct.a.Description,{className:"profileDescription"},x.description)))),x.id===R.id?o.a.createElement(_e.a,null,o.a.createElement("h2",null,"Personal information"),o.a.createElement(_e.a.Group,{widths:"equal"},o.a.createElement(_e.a.Input,{fluid:!0,label:"First name",value:O,onChange:function(e){var t=e.target;return j(t.value)},placeholder:"First name"}),o.a.createElement(_e.a.Input,{fluid:!0,label:"Last name",value:S,onChange:function(e){var t=e.target;return w(t.value)},placeholder:"Last name"}),o.a.createElement(_e.a.Input,{fluid:!0,label:"Username",value:M,onChange:function(e){var t=e.target;return L(t.value)},placeholder:"Last name"})),o.a.createElement(_e.a.TextArea,{className:"descriptionEdit",label:"Description",value:U,onChange:function(e){var t=e.target;return D(t.value)},placeholder:"Your description..."}),o.a.createElement(be.a,{primary:!0,type:"submit",onClick:function(e){e.preventDefault(),d({variables:{firstName:O,lastName:S,username:M,description:U}}),t("Editing user...")}},"Save")):null):o.a.createElement("h1",null,"This user was not found")},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":return t.data.me;case"CLEAR_USER":return null}return e},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return console.log("data in init users",t.data),t.data.data.allUsers}return e},ut=a(669),mt=function(){var e=Object(Ue.b)(),t=Object(Ue.c)((function(e){return e.user})),a=Object(i.a)(ie),n=Object(i.a)(ue),c=Object(r.useState)(null),s=Object(l.a)(c,2),d=s[0],f=s[1],p=Object(u.a)(),g=Object(r.useState)(null),b=Object(l.a)(g,2),E=b[0],v=b[1],O=Object(r.useState)(!1),j=Object(l.a)(O,2),h=j[0],y=j[1],S=Object(r.useState)(""),w=Object(l.a)(S,2),C=w[0],k=w[1],M=Object(r.useState)(""),L=Object(l.a)(M,2),N=L[0],P=L[1],U=Object(r.useState)(!1),D=Object(l.a)(U,2),$=D[0],I=D[1],R=Object(i.a)(fe,{notifyOnNetworkStatusChange:!0}),x=R.loading,T=(R.error,R.data),A=R.refetch,B=R.networkStatus;Object(m.a)(pe,{onSubscriptionData:function(e){var a=e.subscriptionData;console.log("ADDED POST",a);var n=a.data.postAdded;n.user.username!==t.username?I(!0):function(e){var t,a,n=p.readQuery({query:ue});t=n.allPosts,a=e,t.map((function(e){return e.id})).includes(a.id)||p.writeQuery({query:ue,data:{allPosts:n.allPosts.concat(e)}})}(n)}}),Object(m.a)(le,{onSubscriptionData:function(e){var t=e.subscriptionData;console.log("ADDED MESSAGE",t),function(e){var t,a,n=p.readQuery({query:se});t=n.allMessages,a=e,t.map((function(e){return e.id})).includes(a.id)||p.writeQuery({query:se,data:{allMessages:n.allMessages.concat(e)}})}(t.data.messageAdded)}}),document.title="Social Media App";var q=function(){setTimeout((function(){k("")}),3e3)},H=function(){A()};if(Object(r.useEffect)((function(){var e=localStorage.getItem("user-token");e&&f(e)}),[]),4===B)return o.a.createElement("div",{className:"loader"});if(a.loading||x||n.loading)return o.a.createElement("div",{className:"loader"});console.log("MORE POSTS",n),e(function(e){return{type:"INIT_POSTS",data:e}}(n)),e(function(e){return{type:"INIT_USERS",data:e}}(a)),e(function(e){return{type:"INIT_USER",data:e}}(T));var _=function(e){v(e),console.log("MME"),setTimeout((function(){v(null)}),5e3)},z=function(){n.refetch(),I(!1)},G=function(e){var t=e.errorMessage;return t?o.a.createElement(Ne.a,{variant:"danger"},t):null},Q=function(){f(null),e({type:"CLEAR_USER"}),localStorage.clear(),p.resetStore()};return o.a.createElement("div",{className:"container"},o.a.createElement(Oe.a,null,o.a.createElement(Oe.b,{className:"homeLink",to:"/"},o.a.createElement("h1",{className:"center"},"Social Media App")),o.a.createElement(G,{errorMessage:E}),o.a.createElement(et,{showModal:h,setShowModal:y,setMessageContent:P,setMessageHeader:k,emptyMessageHeader:q}),t&&"http://localhost:3000/login"!==window.location.href?o.a.createElement("div",{className:"homepage-actions"},t?o.a.createElement("p",null,t.profilePicture?o.a.createElement("img",{src:t.profilePicture.imageUrl,className:"profile-picture"}):o.a.createElement(Ee.a,{name:"user",size:"small"})," ",o.a.createElement("strong",null,"Welcome back ",t.name,"!")):null,o.a.createElement(Pe.a,{variant:"secondary",onClick:Q},"Log out"),o.a.createElement(Oe.b,{to:"/"},o.a.createElement(Pe.a,{variant:"primary",className:"margin-left-10"},"Home")),o.a.createElement(Oe.b,{to:"/users"},o.a.createElement(Pe.a,{variant:"primary",className:"margin-left-10"},"Users")),o.a.createElement(Oe.b,{to:"/chat"}," ",o.a.createElement(Pe.a,{variant:"primary",className:"margin-left-10"},"Chat"))):null,o.a.createElement(ve.d,null,o.a.createElement(ve.b,{path:"/login"},o.a.createElement("div",null,o.a.createElement(Le,{setToken:f,refetchUser:H,setError:_}))),o.a.createElement(ve.b,{path:"/signup"},o.a.createElement(xe,{setError:v,setToken:f,refetchUser:H})),o.a.createElement(ve.b,{path:"/chat"},d?o.a.createElement(ot,{user:t}):o.a.createElement(ve.a,{to:"/login"})),o.a.createElement(ve.b,{path:"/users/:id"},d?o.a.createElement(st,{setMessageHeader:k,emptyMessageHeader:q}):o.a.createElement(ve.a,{to:"/login"})),o.a.createElement(ve.b,{path:"/users"},d?o.a.createElement(rt,null):o.a.createElement(ve.a,{to:"/login"})),o.a.createElement(ve.b,{path:"/"},o.a.createElement(Pe.a,{variant:"primary",className:"add-post-button",onClick:function(){return y(!0)}},"Add Post"),d?o.a.createElement("div",null,$?o.a.createElement(Pe.a,{variant:"primary",className:"updatePostsButton",onClick:z}," New posts "):null,o.a.createElement(Je,{logout:Q,setMessageHeader:k,setMessageContent:P,emptyMessageHeader:q})):o.a.createElement(ve.a,{to:"/login"})))),""!==C?o.a.createElement(ut.a,{className:"message",color:"black",header:C,content:N}):null)},dt=a(167),ft=a(51),pt=a(168),gt=a(169),bt=a(320),Et=a(350),vt=a(351),Ot=a(104),jt=a(347),ht=a(348),yt=Object(Ot.combineReducers)({posts:qe,user:lt,users:it}),St=Object(Ot.createStore)(yt,Object(ht.composeWithDevTools)(Object(Ot.applyMiddleware)(jt.a))),wt=a(349),Ct=a(352),kt=Object(Et.a)((function(e,t){var a=t.headers,r=localStorage.getItem("user-token");return{headers:Object(n.a)(Object(n.a)({},a),{},{authorization:r?"bearer ".concat(r):null})}})),Mt=Object(vt.createUploadLink)({uri:"/graphql"}),Lt=new Ct.a({uri:"ws://localhost:5000/graphql",options:{reconnect:!0}}),Nt=Object(dt.a)((function(e){var t=e.query,a=Object(wt.a)(t);return"OperationDefinition"===a.kind&&"subscription"===a.operation}),Lt,kt.concat(Mt)),Pt=(ft.a.from([Nt]),new pt.a({cache:new gt.a,link:Nt}));s.a.render(o.a.createElement(Ue.a,{store:St},o.a.createElement(bt.a,{client:Pt},o.a.createElement(mt,null))),document.getElementById("root"))}},[[369,1,2]]]);
//# sourceMappingURL=main.5f65136a.chunk.js.map